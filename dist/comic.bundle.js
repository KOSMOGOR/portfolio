function t(t){const e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new t.constructor(+t):"number"==typeof t||"[object Number]"===e||"string"==typeof t||"[object String]"===e?new Date(t):new Date(NaN)}const e=864e5;function n(e){const n=t(e);return n.setHours(0,0,0,0),n}function o(e){const n=t(e),o=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return o.setUTCFullYear(n.getFullYear()),+e-+o}function r(r,c){const a=t(r),s=t(c),u=i(a,s),l=Math.abs(function(t,r){const i=n(t),c=n(r),a=+i-o(i),s=+c-o(c);return Math.round((a-s)/e)}(a,s));a.setDate(a.getDate()-u*l);const g=u*(l-Number(i(a,s)===-u));return 0===g?0:g}function i(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}window.onload=async()=>{const t=document.getElementById("title"),e=document.getElementById("comic"),n=document.getElementById("date"),o=document.getElementById("daysAgo");let i=await fetch("https://fwd.innopolis.university/api/hw2?"+new URLSearchParams({email:"e.savchenko@innopolis.university"}));if(!i.ok)return console.error("Error fetching id");let c=await i.text(),a=await fetch("https://fwd.innopolis.university/api/comic?"+new URLSearchParams({id:c}));if(!a.ok)return console.error("Error fetching comic");let s=JSON.parse(await a.text());console.log(s),t&&(t.textContent=s.safe_title),e&&e.setAttribute("src",s.img);let u=new Date(Number(s.year),Number(s.month),Number(s.day));n&&(n.textContent=u.toLocaleDateString()),o&&(o.textContent=String(r(new Date,u)))};
